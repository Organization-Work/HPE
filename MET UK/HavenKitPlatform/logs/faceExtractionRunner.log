2/19/2018, 1:21:00.209 AM [ListFaceDatabases] Cannot connect to HPE Media Server on localhost:14000
2/19/2018, 1:21:50.744 AM [ListFaceDatabases] Cannot connect to HPE Media Server on localhost:14000
2/19/2018, 1:21:53.954 AM [corridor2] 3a86a2e556c4110272e5d73dca43e2b8
2/19/2018, 1:21:53.959 AM [Create Databases] Create database for each video
2/19/2018, 1:21:55.3 AM [createFaceDatabase] Cannot connect to HPE Media Server on localhost:14000
2/19/2018, 1:21:55.527 AM [startAnalysis] Processing corridor2.MP4
2/19/2018, 1:21:55.533 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 3a86a2e556c4110272e5d73dca43e2b8
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor2/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:21:55.746 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:21:56.762 AM [process] Cannot connect to HPE Media Server on localhost:14000
2/19/2018, 1:22:01.395 AM [ListFaceDatabases] Cannot connect to HPE Media Server on localhost:14000
2/19/2018, 1:23:32.302 AM [xmlClean] No old XML to clean.
2/19/2018, 1:23:32.330 AM [validateOptions] Setting default values for minFaceWidth
2/19/2018, 1:23:32.336 AM [validateOptions] {
  "mediaserver": {
    "host": "localhost",
    "port": 14000,
    "failedPath": "C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed"
  },
  "faceExtractorServer": {
    "host": "localhost",
    "port": 14010
  },
  "videoActionsServer": {
    "host": "localhost",
    "port": 14020
  },
  "dropboxDir": "C:/HewlettPackardEnterprise/dropbox",
  "createClip": true,
  "createClipFormat": ".mp4",
  "clipBuffer": 500,
  "videoPath": "",
  "videoDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos",
  "videoTypes": [
    ".mp4",
    ".avi"
  ],
  "containerTypes": [
    ".zip",
    ".rar",
    ".tar",
    ".tar.gz",
    ".tar.z",
    ".pptx",
    ".pdf"
  ],
  "subfileDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos\\subFiles",
  "keyViewBinDir": "C:/HewlettPackardEnterprise/KeyviewFilterSDK-11.2.0/WINDOWS_X86_64/bin",
  "faceDir": "C:\\HewlettPackardEnterprise\\dropbox\\faces",
  "exportDir": "C:/faces",
  "configFEA": "C:/HewlettPackardEnterprise//face-extraction-app",
  "configHKP": "C:/HewlettPackardEnterprise//HavenKitPlatform/module",
  "cfgFile": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/faceExtractor.cfg",
  "luaDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "xslDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "bestFaceOnly": false,
  "faceOutputInterval": 10,
  "realTime": true,
  "sampleInterval": 1000,
  "numParallel": 1,
  "minSize": 40,
  "colorAnalysis": false,
  "detectTilted": true,
  "faceDirection": "any",
  "orientation": "any",
  "recognitionThreshold": 75,
  "minFaceWidth": 50
}
2/19/2018, 1:23:32.373 AM [Main] Application started.
2/19/2018, 1:23:40.897 AM [ListFaceDatabases] Cannot connect to HPE Media Server on localhost:14000
2/19/2018, 1:25:20.701 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:25:20.707 AM [Remove Databases] Remove all databases
2/19/2018, 1:25:20.791 AM [removeFaceDatabase 44f35480dd4cf2cbfb7d0345841f8dca] SUCCESS
2/19/2018, 1:25:24.299 AM [!£$%^()_+-)(^$£!abce] c380c19738a41188f676be3937b7f287
2/19/2018, 1:25:24.303 AM [Create Databases] Create database for each video
2/19/2018, 1:25:24.357 AM [createFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:25:26.506 AM [startAnalysis] Processing !£$%^()_+-)(^$£!abce.mp4
2/19/2018, 1:25:26.513 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = c380c19738a41188f676be3937b7f287
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:25:26.697 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:25:26.702 AM [startAnalysis] video server return -1.
2/19/2018, 1:25:38.409 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:25:38.414 AM [Remove Databases] Remove all databases
2/19/2018, 1:25:38.448 AM [removeFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:25:53.107 AM [£$%^()_+-)(^$£!abce] 612ef639e5b24c4e83580e5795e7e7b9
2/19/2018, 1:25:53.111 AM [Create Databases] Create database for each video
2/19/2018, 1:25:53.197 AM [createFaceDatabase 612ef639e5b24c4e83580e5795e7e7b9] SUCCESS
2/19/2018, 1:25:54.764 AM [startAnalysis] Processing £$%^()_+-)(^$£!abce.mp4
2/19/2018, 1:25:54.769 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 612ef639e5b24c4e83580e5795e7e7b9
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:25:54.954 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:25:54.956 AM [startAnalysis] video server return -1.
2/19/2018, 1:26:00.207 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:26:00.214 AM [Remove Databases] Remove all databases
2/19/2018, 1:26:00.242 AM [removeFaceDatabase 612ef639e5b24c4e83580e5795e7e7b9] SUCCESS
2/19/2018, 1:26:16.819 AM [$%^()_+-)(^$!abce] 5645b8b71759e041b59f6fc752322aa6
2/19/2018, 1:26:16.832 AM [Create Databases] Create database for each video
2/19/2018, 1:26:16.902 AM [createFaceDatabase 5645b8b71759e041b59f6fc752322aa6] SUCCESS
2/19/2018, 1:26:18.544 AM [startAnalysis] Processing $%^()_+-)(^$!abce.mp4
2/19/2018, 1:26:18.550 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 5645b8b71759e041b59f6fc752322aa6
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:26:18.751 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:26:18.756 AM [startAnalysis] video server return -1.
2/19/2018, 1:26:45.670 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:26:45.677 AM [Remove Databases] Remove all databases
2/19/2018, 1:26:45.716 AM [removeFaceDatabase 5645b8b71759e041b59f6fc752322aa6] SUCCESS
2/19/2018, 1:27:08.183 AM [$%^()_+-)(^$abce] 5cdb1b08be13d2007b90c14fb6ea5295
2/19/2018, 1:27:08.188 AM [Create Databases] Create database for each video
2/19/2018, 1:27:08.229 AM [createFaceDatabase 5cdb1b08be13d2007b90c14fb6ea5295] SUCCESS
2/19/2018, 1:27:10.112 AM [startAnalysis] Processing $%^()_+-)(^$abce.mp4
2/19/2018, 1:27:10.125 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 5cdb1b08be13d2007b90c14fb6ea5295
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:27:10.321 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:27:10.326 AM [startAnalysis] video server return -1.
2/19/2018, 1:27:43.221 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:27:43.227 AM [Remove Databases] Remove all databases
2/19/2018, 1:27:43.262 AM [removeFaceDatabase 5cdb1b08be13d2007b90c14fb6ea5295] SUCCESS
2/19/2018, 1:27:55.879 AM [$abce] 183f95ef75fe912d1a01194391cd0c29
2/19/2018, 1:27:55.884 AM [Create Databases] Create database for each video
2/19/2018, 1:27:55.930 AM [createFaceDatabase 183f95ef75fe912d1a01194391cd0c29] SUCCESS
2/19/2018, 1:27:57.309 AM [startAnalysis] Processing $abce.mp4
2/19/2018, 1:27:57.324 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 183f95ef75fe912d1a01194391cd0c29
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:27:57.570 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:27:57.631 AM [process] SUCCESS
2/19/2018, 1:28:02.685 AM [queueinfo] SUCCESS
2/19/2018, 1:28:02.725 AM [getstatus] SUCCESS
2/19/2018, 1:28:04.324 AM [queueinfo] SUCCESS
2/19/2018, 1:28:04.334 AM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:28:08.398 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:28:08.404 AM [Remove Databases] Remove all databases
2/19/2018, 1:28:08.427 AM [removeFaceDatabase 183f95ef75fe912d1a01194391cd0c29] SUCCESS
2/19/2018, 1:28:24.546 AM [^$abce] 5957e40756ea4b6b6453916b03bb8430
2/19/2018, 1:28:24.551 AM [Create Databases] Create database for each video
2/19/2018, 1:28:24.626 AM [createFaceDatabase 5957e40756ea4b6b6453916b03bb8430] SUCCESS
2/19/2018, 1:28:25.955 AM [startAnalysis] Processing ^$abce.mp4
2/19/2018, 1:28:25.968 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 5957e40756ea4b6b6453916b03bb8430
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:28:26.165 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:28:26.223 AM [process] SUCCESS
2/19/2018, 1:28:31.274 AM [queueinfo] SUCCESS
2/19/2018, 1:28:31.304 AM [getstatus] SUCCESS
2/19/2018, 1:28:32.188 AM [queueinfo] SUCCESS
2/19/2018, 1:28:32.192 AM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:28:35.706 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:28:35.710 AM [Remove Databases] Remove all databases
2/19/2018, 1:28:35.744 AM [removeFaceDatabase 5957e40756ea4b6b6453916b03bb8430] SUCCESS
2/19/2018, 1:28:55.526 AM [(^$abce] 1f584ca407557b136ab8c959a65b4307
2/19/2018, 1:28:55.531 AM [Create Databases] Create database for each video
2/19/2018, 1:28:55.605 AM [createFaceDatabase 1f584ca407557b136ab8c959a65b4307] SUCCESS
2/19/2018, 1:28:57.224 AM [startAnalysis] Processing (^$abce.mp4
2/19/2018, 1:28:57.230 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 1f584ca407557b136ab8c959a65b4307
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:28:57.403 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:28:57.409 AM [startAnalysis] video server return -1.
2/19/2018, 1:29:05.769 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:29:05.776 AM [Remove Databases] Remove all databases
2/19/2018, 1:29:05.823 AM [removeFaceDatabase 1f584ca407557b136ab8c959a65b4307] SUCCESS
2/19/2018, 1:29:19.171 AM [(abce] 0b01c4bbfb48e48a5de8373276d3db4a
2/19/2018, 1:29:19.175 AM [Create Databases] Create database for each video
2/19/2018, 1:29:19.227 AM [createFaceDatabase 0b01c4bbfb48e48a5de8373276d3db4a] SUCCESS
2/19/2018, 1:29:20.689 AM [startAnalysis] Processing (abce.mp4
2/19/2018, 1:29:20.702 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 0b01c4bbfb48e48a5de8373276d3db4a
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:29:20.892 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:29:20.940 AM [process] SUCCESS
2/19/2018, 1:29:25.989 AM [queueinfo] SUCCESS
2/19/2018, 1:29:26.17 AM [getstatus] SUCCESS
2/19/2018, 1:29:27.750 AM [queueinfo] SUCCESS
2/19/2018, 1:29:27.755 AM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:29:32.392 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:29:32.403 AM [Remove Databases] Remove all databases
2/19/2018, 1:29:32.438 AM [removeFaceDatabase 0b01c4bbfb48e48a5de8373276d3db4a] SUCCESS
2/19/2018, 1:29:47.345 AM [(^$abce] 1f584ca407557b136ab8c959a65b4307
2/19/2018, 1:29:47.352 AM [Create Databases] Create database for each video
2/19/2018, 1:29:47.400 AM [createFaceDatabase 1f584ca407557b136ab8c959a65b4307] SUCCESS
2/19/2018, 1:29:49.392 AM [startAnalysis] Processing (^$abce.mp4
2/19/2018, 1:29:49.407 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 1f584ca407557b136ab8c959a65b4307
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:29:49.599 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:29:49.602 AM [startAnalysis] video server return -1.
2/19/2018, 1:32:03.166 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:32:03.172 AM [Remove Databases] Remove all databases
2/19/2018, 1:32:03.208 AM [removeFaceDatabase 1f584ca407557b136ab8c959a65b4307] SUCCESS
2/19/2018, 1:32:14.145 AM [(^$abce] 1f584ca407557b136ab8c959a65b4307
2/19/2018, 1:32:14.155 AM [Create Databases] Create database for each video
2/19/2018, 1:32:14.201 AM [createFaceDatabase 1f584ca407557b136ab8c959a65b4307] SUCCESS
2/19/2018, 1:32:15.961 AM [startAnalysis] Processing (^$abce.mp4
2/19/2018, 1:32:15.976 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 1f584ca407557b136ab8c959a65b4307
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:32:16.175 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:32:16.206 AM [process] SUCCESS
2/19/2018, 1:32:21.254 AM [queueinfo] SUCCESS
2/19/2018, 1:32:21.292 AM [getstatus] SUCCESS
2/19/2018, 1:32:26.276 AM [queueinfo] SUCCESS
2/19/2018, 1:32:26.318 AM [getstatus] SUCCESS
2/19/2018, 1:32:29.455 AM [queueinfo] SUCCESS
2/19/2018, 1:32:29.460 AM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:32:43.296 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:32:43.301 AM [Remove Databases] Remove all databases
2/19/2018, 1:32:43.335 AM [removeFaceDatabase 1f584ca407557b136ab8c959a65b4307] SUCCESS
2/19/2018, 1:33:19.378 AM [!£$%^()_+-)(^$£!abce] c380c19738a41188f676be3937b7f287
2/19/2018, 1:33:19.382 AM [Create Databases] Create database for each video
2/19/2018, 1:33:19.483 AM [createFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:33:22.312 AM [startAnalysis] Processing !£$%^()_+-)(^$£!abce.mp4
2/19/2018, 1:33:22.327 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = c380c19738a41188f676be3937b7f287
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:33:22.502 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:33:22.535 AM [process] SUCCESS
2/19/2018, 1:33:27.576 AM [queueinfo] SUCCESS
2/19/2018, 1:33:27.580 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:34:28.361 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:34:28.373 AM [Remove Databases] Remove all databases
2/19/2018, 1:34:28.428 AM [removeFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:34:32.274 AM [!£$%^()_+-)(^$£!abce] c380c19738a41188f676be3937b7f287
2/19/2018, 1:34:32.279 AM [Create Databases] Create database for each video
2/19/2018, 1:34:32.337 AM [createFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:34:34.483 AM [startAnalysis] Processing !£$%^()_+-)(^$£!abce.mp4
2/19/2018, 1:34:34.488 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = c380c19738a41188f676be3937b7f287
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:34:35.55 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:34:35.97 AM [process] SUCCESS
2/19/2018, 1:34:40.141 AM [queueinfo] SUCCESS
2/19/2018, 1:34:40.144 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:35:14.616 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:35:14.622 AM [Remove Databases] Remove all databases
2/19/2018, 1:35:14.670 AM [removeFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:35:29.739 AM [£$%^()_+-)(^$£abce] df26f783459e6e8d7756c5c8cd25db02
2/19/2018, 1:35:29.744 AM [Create Databases] Create database for each video
2/19/2018, 1:35:29.834 AM [createFaceDatabase df26f783459e6e8d7756c5c8cd25db02] SUCCESS
2/19/2018, 1:35:31.475 AM [startAnalysis] Processing £$%^()_+-)(^$£abce.mp4
2/19/2018, 1:35:31.481 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = df26f783459e6e8d7756c5c8cd25db02
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/£$%^()_+-)(^$£abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:35:31.659 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:35:31.681 AM [process] SUCCESS
2/19/2018, 1:35:36.712 AM [queueinfo] SUCCESS
2/19/2018, 1:35:36.714 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:35:42.488 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:35:42.493 AM [Remove Databases] Remove all databases
2/19/2018, 1:35:42.539 AM [removeFaceDatabase df26f783459e6e8d7756c5c8cd25db02] SUCCESS
2/19/2018, 1:36:21.289 AM [$%^()_+-)(^$abce] 5cdb1b08be13d2007b90c14fb6ea5295
2/19/2018, 1:36:21.293 AM [Create Databases] Create database for each video
2/19/2018, 1:36:21.336 AM [createFaceDatabase 5cdb1b08be13d2007b90c14fb6ea5295] SUCCESS
2/19/2018, 1:36:22.667 AM [startAnalysis] Processing $%^()_+-)(^$abce.mp4
2/19/2018, 1:36:22.680 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 5cdb1b08be13d2007b90c14fb6ea5295
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_+-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:36:22.853 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:36:22.876 AM [process] SUCCESS
2/19/2018, 1:36:27.907 AM [queueinfo] SUCCESS
2/19/2018, 1:36:27.910 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:36:32.464 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:36:32.468 AM [Remove Databases] Remove all databases
2/19/2018, 1:36:32.516 AM [removeFaceDatabase 5cdb1b08be13d2007b90c14fb6ea5295] SUCCESS
2/19/2018, 1:36:56.125 AM [$%^()_-)(^$abce] c9f70ac811190823b515a2d65d691466
2/19/2018, 1:36:56.129 AM [Create Databases] Create database for each video
2/19/2018, 1:36:56.167 AM [createFaceDatabase c9f70ac811190823b515a2d65d691466] SUCCESS
2/19/2018, 1:36:57.270 AM [startAnalysis] Processing $%^()_-)(^$abce.mp4
2/19/2018, 1:36:57.274 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = c9f70ac811190823b515a2d65d691466
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/$%^()_-)(^$abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:36:57.437 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:36:57.460 AM [process] SUCCESS
2/19/2018, 1:37:02.499 AM [queueinfo] SUCCESS
2/19/2018, 1:37:02.529 AM [getstatus] SUCCESS
2/19/2018, 1:37:05.310 AM [queueinfo] SUCCESS
2/19/2018, 1:37:05.318 AM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:37:08.811 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:37:08.815 AM [Remove Databases] Remove all databases
2/19/2018, 1:37:08.849 AM [removeFaceDatabase c9f70ac811190823b515a2d65d691466] SUCCESS
2/19/2018, 1:38:09.387 AM [!£$%^()_-)(^$£!abce] 2502fe6da246d1fc0916dfac6d8e6a8c
2/19/2018, 1:38:09.391 AM [Create Databases] Create database for each video
2/19/2018, 1:38:09.446 AM [createFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:38:11.121 AM [startAnalysis] Processing !£$%^()_-)(^$£!abce.mp4
2/19/2018, 1:38:11.135 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 2502fe6da246d1fc0916dfac6d8e6a8c
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:38:11.312 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:38:11.332 AM [process] SUCCESS
2/19/2018, 1:38:16.369 AM [queueinfo] SUCCESS
2/19/2018, 1:38:16.396 AM [getstatus] SUCCESS
2/19/2018, 1:38:19.549 AM [queueinfo] SUCCESS
2/19/2018, 1:38:19.558 AM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:41:30.905 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:41:30.909 AM [Remove Databases] Remove all databases
2/19/2018, 1:41:30.943 AM [removeFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:41:44.81 AM [+abce] 94c7eb8eb73ca0fe75e6161e38ea4c1f
2/19/2018, 1:41:44.85 AM [Create Databases] Create database for each video
2/19/2018, 1:41:44.127 AM [createFaceDatabase 94c7eb8eb73ca0fe75e6161e38ea4c1f] SUCCESS
2/19/2018, 1:41:45.321 AM [startAnalysis] Processing +abce.mp4
2/19/2018, 1:41:45.325 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 94c7eb8eb73ca0fe75e6161e38ea4c1f
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/+abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:41:45.510 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:41:45.534 AM [process] SUCCESS
2/19/2018, 1:41:50.563 AM [queueinfo] SUCCESS
2/19/2018, 1:41:50.565 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:44:19.715 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:44:19.718 AM [Remove Databases] Remove all databases
2/19/2018, 1:44:19.743 AM [removeFaceDatabase 94c7eb8eb73ca0fe75e6161e38ea4c1f] SUCCESS
2/19/2018, 1:44:33.991 AM [abce+] be4c2a456b68bac37fe998e3a1ad301d
2/19/2018, 1:44:33.996 AM [Create Databases] Create database for each video
2/19/2018, 1:44:34.45 AM [createFaceDatabase be4c2a456b68bac37fe998e3a1ad301d] SUCCESS
2/19/2018, 1:44:35.609 AM [startAnalysis] Processing abce+.mp4
2/19/2018, 1:44:35.614 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = be4c2a456b68bac37fe998e3a1ad301d
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce+/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:44:35.791 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:44:35.815 AM [process] SUCCESS
2/19/2018, 1:44:40.958 AM [queueinfo] SUCCESS
2/19/2018, 1:44:40.962 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:46:21.214 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:46:21.220 AM [Remove Databases] Remove all databases
2/19/2018, 1:46:21.246 AM [removeFaceDatabase be4c2a456b68bac37fe998e3a1ad301d] SUCCESS
2/19/2018, 1:46:23.95 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:46:23.104 AM [Remove database] No database to remove
2/19/2018, 1:46:51.992 AM [abce+] be4c2a456b68bac37fe998e3a1ad301d
2/19/2018, 1:46:52.0 AM [Create Databases] Create database for each video
2/19/2018, 1:46:52.41 AM [createFaceDatabase be4c2a456b68bac37fe998e3a1ad301d] SUCCESS
2/19/2018, 1:47:09.814 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:47:09.818 AM [Remove Databases] Remove all databases
2/19/2018, 1:47:09.842 AM [removeFaceDatabase be4c2a456b68bac37fe998e3a1ad301d] SUCCESS
2/19/2018, 1:47:39.894 AM [abce&] 9af4618e0f42c153c9e05bf8ff321e2b
2/19/2018, 1:47:39.898 AM [Create Databases] Create database for each video
2/19/2018, 1:47:40.14 AM [createFaceDatabase 9af4618e0f42c153c9e05bf8ff321e2b] SUCCESS
2/19/2018, 1:47:43.629 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:47:43.634 AM [Remove Databases] Remove all databases
2/19/2018, 1:47:43.675 AM [removeFaceDatabase 9af4618e0f42c153c9e05bf8ff321e2b] SUCCESS
2/19/2018, 1:47:48.474 AM [abce&] 9af4618e0f42c153c9e05bf8ff321e2b
2/19/2018, 1:47:48.478 AM [Create Databases] Create database for each video
2/19/2018, 1:47:48.517 AM [createFaceDatabase 9af4618e0f42c153c9e05bf8ff321e2b] SUCCESS
2/19/2018, 1:47:50.204 AM [startAnalysis] Processing abce&.mp4
2/19/2018, 1:47:50.213 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 9af4618e0f42c153c9e05bf8ff321e2b
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:47:50.383 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:47:50.386 AM [startAnalysis] video server return -1.
2/19/2018, 1:47:56.667 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:47:56.671 AM [Remove Databases] Remove all databases
2/19/2018, 1:47:56.749 AM [removeFaceDatabase 9af4618e0f42c153c9e05bf8ff321e2b] SUCCESS
2/19/2018, 1:48:08.84 AM [abce=] 5b505fc38af56ad466414de6c6bf65c1
2/19/2018, 1:48:08.86 AM [Create Databases] Create database for each video
2/19/2018, 1:48:08.137 AM [createFaceDatabase 5b505fc38af56ad466414de6c6bf65c1] SUCCESS
2/19/2018, 1:48:09.586 AM [startAnalysis] Processing abce=.mp4
2/19/2018, 1:48:09.596 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 5b505fc38af56ad466414de6c6bf65c1
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce=/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:48:09.736 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:48:09.738 AM [startAnalysis] video server return -1.
2/19/2018, 1:48:13.475 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:48:13.482 AM [Remove Databases] Remove all databases
2/19/2018, 1:48:13.526 AM [removeFaceDatabase 5b505fc38af56ad466414de6c6bf65c1] SUCCESS
2/19/2018, 1:48:46.421 AM [abce&] 9af4618e0f42c153c9e05bf8ff321e2b
2/19/2018, 1:48:46.428 AM [Create Databases] Create database for each video
2/19/2018, 1:48:46.510 AM [createFaceDatabase 9af4618e0f42c153c9e05bf8ff321e2b] SUCCESS
2/19/2018, 1:48:48.324 AM [startAnalysis] Processing abce&.mp4
2/19/2018, 1:48:48.335 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 9af4618e0f42c153c9e05bf8ff321e2b
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/abce&/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:48:48.501 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:48:48.504 AM [startAnalysis] video server return -1.
2/19/2018, 1:54:21.30 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:54:21.39 AM [Remove Databases] Remove all databases
2/19/2018, 1:54:21.74 AM [removeFaceDatabase 9af4618e0f42c153c9e05bf8ff321e2b] SUCCESS
2/19/2018, 1:54:50.62 AM [!£$%^()_+-)(^$£!abce] c380c19738a41188f676be3937b7f287
2/19/2018, 1:54:50.66 AM [Create Databases] Create database for each video
2/19/2018, 1:54:50.132 AM [createFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:54:55.619 AM [startAnalysis] Processing !£$%^()_+-)(^$£!abce.mp4
2/19/2018, 1:54:55.633 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = c380c19738a41188f676be3937b7f287
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_+-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:54:55.829 AM [startAnalysis] Video frames to process: 756
2/19/2018, 1:54:55.856 AM [process] SUCCESS
2/19/2018, 1:55:00.907 AM [queueinfo] SUCCESS
2/19/2018, 1:55:00.911 AM [checkProgress] process status: Error. Check Media Server logs.
2/19/2018, 1:55:16.48 AM [ListFaceDatabases] SUCCESS
2/19/2018, 1:55:16.52 AM [Remove Databases] Remove all databases
2/19/2018, 1:55:16.85 AM [removeFaceDatabase c380c19738a41188f676be3937b7f287] SUCCESS
2/19/2018, 1:55:25.640 AM [!£$%^()_-)(^$£!abce] 2502fe6da246d1fc0916dfac6d8e6a8c
2/19/2018, 1:55:25.650 AM [Create Databases] Create database for each video
2/19/2018, 1:55:25.712 AM [createFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:55:27.285 AM [startAnalysis] Processing !£$%^()_-)(^$£!abce.mp4
2/19/2018, 1:55:27.301 AM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 2502fe6da246d1fc0916dfac6d8e6a8c
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:55:27.510 AM [startAnalysis] Video frames to process: -1
2/19/2018, 1:55:27.513 AM [startAnalysis] video server return -1.
2/19/2018, 1:22:20.467 PM [xmlClean] No old XML to clean.
2/19/2018, 1:22:20.493 PM [validateOptions] Setting default values for minFaceWidth
2/19/2018, 1:22:20.496 PM [validateOptions] {
  "mediaserver": {
    "host": "localhost",
    "port": 14000,
    "failedPath": "C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed"
  },
  "faceExtractorServer": {
    "host": "localhost",
    "port": 14010
  },
  "videoActionsServer": {
    "host": "localhost",
    "port": 14020
  },
  "dropboxDir": "C:/HewlettPackardEnterprise/dropbox",
  "createClip": true,
  "createClipFormat": ".mp4",
  "clipBuffer": 500,
  "videoPath": "",
  "videoDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos",
  "videoTypes": [
    ".mp4",
    ".avi"
  ],
  "containerTypes": [
    ".zip",
    ".rar",
    ".tar",
    ".tar.gz",
    ".tar.z",
    ".pptx",
    ".pdf"
  ],
  "subfileDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos\\subFiles",
  "keyViewBinDir": "C:/HewlettPackardEnterprise/KeyviewFilterSDK-11.2.0/WINDOWS_X86_64/bin",
  "faceDir": "C:\\HewlettPackardEnterprise\\dropbox\\faces",
  "exportDir": "C:/faces",
  "configFEA": "C:/HewlettPackardEnterprise//face-extraction-app",
  "configHKP": "C:/HewlettPackardEnterprise//HavenKitPlatform/module",
  "cfgFile": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/faceExtractor.cfg",
  "luaDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "xslDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "bestFaceOnly": false,
  "faceOutputInterval": 10,
  "realTime": true,
  "sampleInterval": 1000,
  "numParallel": 1,
  "minSize": 40,
  "colorAnalysis": false,
  "detectTilted": true,
  "faceDirection": "any",
  "orientation": "any",
  "recognitionThreshold": 75,
  "minFaceWidth": 50
}
2/19/2018, 1:22:20.517 PM [Main] Application started.
2/19/2018, 1:22:54.995 PM [xmlClean] No old XML to clean.
2/19/2018, 1:22:55.23 PM [validateOptions] Setting default values for minFaceWidth
2/19/2018, 1:22:55.29 PM [validateOptions] {
  "mediaserver": {
    "host": "localhost",
    "port": 14000,
    "failedPath": "C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed"
  },
  "faceExtractorServer": {
    "host": "localhost",
    "port": 14010
  },
  "videoActionsServer": {
    "host": "localhost",
    "port": 14020
  },
  "dropboxDir": "C:/HewlettPackardEnterprise/dropbox",
  "createClip": true,
  "createClipFormat": ".mp4",
  "clipBuffer": 500,
  "videoPath": "",
  "videoDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos",
  "videoTypes": [
    ".mp4",
    ".avi"
  ],
  "containerTypes": [
    ".zip",
    ".rar",
    ".tar",
    ".tar.gz",
    ".tar.z",
    ".pptx",
    ".pdf"
  ],
  "subfileDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos\\subFiles",
  "keyViewBinDir": "C:/HewlettPackardEnterprise/KeyviewFilterSDK-11.2.0/WINDOWS_X86_64/bin",
  "faceDir": "C:\\HewlettPackardEnterprise\\dropbox\\faces",
  "exportDir": "C:/faces",
  "configFEA": "C:/HewlettPackardEnterprise//face-extraction-app",
  "configHKP": "C:/HewlettPackardEnterprise//HavenKitPlatform/module",
  "cfgFile": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/faceExtractor.cfg",
  "luaDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "xslDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "bestFaceOnly": false,
  "faceOutputInterval": 10,
  "realTime": true,
  "sampleInterval": 1000,
  "numParallel": 1,
  "minSize": 40,
  "colorAnalysis": false,
  "detectTilted": true,
  "faceDirection": "any",
  "orientation": "any",
  "recognitionThreshold": 75,
  "minFaceWidth": 50
}
2/19/2018, 1:22:55.32 PM [Main] Application started.
2/19/2018, 1:22:55.680 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:22:55.684 PM [Remove Databases] Remove all databases
2/19/2018, 1:22:55.702 PM [removeFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:23:17.581 PM [!£$%^()_-)(^$£!abce] 2502fe6da246d1fc0916dfac6d8e6a8c
2/19/2018, 1:23:17.584 PM [Create Databases] Create database for each video
2/19/2018, 1:23:17.620 PM [createFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:23:22.188 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:23:22.192 PM [Remove Databases] Remove all databases
2/19/2018, 1:23:22.212 PM [removeFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:24:36.513 PM [!£$%^()_-)(^$£!abce] 2502fe6da246d1fc0916dfac6d8e6a8c
2/19/2018, 1:24:36.517 PM [Create Databases] Create database for each video
2/19/2018, 1:24:36.545 PM [createFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:24:37.951 PM [startAnalysis] Processing !£$%^()_-)(^$£!abce.mp4
2/19/2018, 1:24:37.967 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 2502fe6da246d1fc0916dfac6d8e6a8c
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:24:38.148 PM [startAnalysis] Video frames to process: -1
2/19/2018, 1:24:38.150 PM [startAnalysis] video server return -1.
2/19/2018, 1:25:12.204 PM [xmlClean] No old XML to clean.
2/19/2018, 1:25:12.229 PM [validateOptions] Setting default values for minFaceWidth
2/19/2018, 1:25:12.233 PM [validateOptions] {
  "mediaserver": {
    "host": "localhost",
    "port": 14000,
    "failedPath": "C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed"
  },
  "faceExtractorServer": {
    "host": "localhost",
    "port": 14010
  },
  "videoActionsServer": {
    "host": "localhost",
    "port": 14020
  },
  "dropboxDir": "C:/HewlettPackardEnterprise/dropbox",
  "createClip": true,
  "createClipFormat": ".mp4",
  "clipBuffer": 500,
  "videoPath": "",
  "videoDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos",
  "videoTypes": [
    ".mp4",
    ".avi"
  ],
  "containerTypes": [
    ".zip",
    ".rar",
    ".tar",
    ".tar.gz",
    ".tar.z",
    ".pptx",
    ".pdf"
  ],
  "subfileDir": "C:\\HewlettPackardEnterprise\\dropbox\\videos\\subFiles",
  "keyViewBinDir": "C:/HewlettPackardEnterprise/KeyviewFilterSDK-11.2.0/WINDOWS_X86_64/bin",
  "faceDir": "C:\\HewlettPackardEnterprise\\dropbox\\faces",
  "exportDir": "C:/faces",
  "configFEA": "C:/HewlettPackardEnterprise//face-extraction-app",
  "configHKP": "C:/HewlettPackardEnterprise//HavenKitPlatform/module",
  "cfgFile": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/faceExtractor.cfg",
  "luaDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "xslDir": "C:/HewlettPackardEnterprise//face-extraction-app/mediaserver",
  "bestFaceOnly": false,
  "faceOutputInterval": 10,
  "realTime": true,
  "sampleInterval": 1000,
  "numParallel": 1,
  "minSize": 40,
  "colorAnalysis": false,
  "detectTilted": true,
  "faceDirection": "any",
  "orientation": "any",
  "recognitionThreshold": 75,
  "minFaceWidth": 50
}
2/19/2018, 1:25:12.235 PM [Main] Application started.
2/19/2018, 1:25:14.754 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:25:14.762 PM [Remove Databases] Remove all databases
2/19/2018, 1:25:14.798 PM [removeFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:25:16.305 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:25:16.307 PM [Remove database] No database to remove
2/19/2018, 1:25:19.774 PM [!£$%^()_-)(^$£!abce] 2502fe6da246d1fc0916dfac6d8e6a8c
2/19/2018, 1:25:19.777 PM [Create Databases] Create database for each video
2/19/2018, 1:25:19.807 PM [createFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:25:21.6 PM [startAnalysis] Processing !£$%^()_-)(^$£!abce.mp4
2/19/2018, 1:25:21.11 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 2502fe6da246d1fc0916dfac6d8e6a8c
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/!£$%^()_-)(^$£!abce/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:25:21.213 PM [startAnalysis] Video frames to process: 756
2/19/2018, 1:25:21.254 PM [process] SUCCESS
2/19/2018, 1:25:26.313 PM [queueinfo] SUCCESS
2/19/2018, 1:25:26.350 PM [getstatus] SUCCESS
2/19/2018, 1:25:28.244 PM [queueinfo] SUCCESS
2/19/2018, 1:25:28.248 PM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:25:31.481 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:25:31.485 PM [Remove Databases] Remove all databases
2/19/2018, 1:25:31.510 PM [removeFaceDatabase 2502fe6da246d1fc0916dfac6d8e6a8c] SUCCESS
2/19/2018, 1:25:36.175 PM [corridor] b254e0ae18029b4e6618b6bfe445dc77
2/19/2018, 1:25:36.179 PM [Create Databases] Create database for each video
2/19/2018, 1:25:36.203 PM [createFaceDatabase b254e0ae18029b4e6618b6bfe445dc77] SUCCESS
2/19/2018, 1:25:37.686 PM [startAnalysis] Processing corridor.MP4
2/19/2018, 1:25:37.692 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = b254e0ae18029b4e6618b6bfe445dc77
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/corridor/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:25:37.846 PM [startAnalysis] Video frames to process: 756
2/19/2018, 1:25:37.868 PM [process] SUCCESS
2/19/2018, 1:25:42.921 PM [queueinfo] SUCCESS
2/19/2018, 1:25:42.954 PM [getstatus] SUCCESS
2/19/2018, 1:25:44.236 PM [queueinfo] SUCCESS
2/19/2018, 1:25:44.240 PM [Extraction Process] Extraction Process Stoped.
2/19/2018, 1:28:06.783 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:28:06.788 PM [Remove Databases] Remove all databases
2/19/2018, 1:28:06.820 PM [removeFaceDatabase b254e0ae18029b4e6618b6bfe445dc77] SUCCESS
2/19/2018, 1:30:37.160 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:30:37.162 PM [Remove database] No database to remove
2/19/2018, 1:31:21.201 PM [Monika1!] e2256bb348f96b201c098db8b6c41018
2/19/2018, 1:31:21.206 PM [Monika1$] 167f0dff796ca41508ab37bbbcefd846
2/19/2018, 1:31:21.209 PM [Monika1%] 0b3b15d751f7d25ed63b4e6670d2c3a7
2/19/2018, 1:31:21.212 PM [Monika1(] 6f21ae3264c54f1d7e2efa6c54bc3dff
2/19/2018, 1:31:21.216 PM [Monika1)] cd70d11fd12cd2671d05615ad2ca432b
2/19/2018, 1:31:21.220 PM [Monika1] 420a6e1b708bf487023727b884e300c2
2/19/2018, 1:31:21.224 PM [Monika1-] 62e81f3bce5726f153c735c1f7356025
2/19/2018, 1:31:21.228 PM [Monika1@] a497f40dae18a2bb561a2eaa3a94d885
2/19/2018, 1:31:21.231 PM [Monika1^] 39268126dc3459f39b0e0eef6a595131
2/19/2018, 1:31:21.236 PM [Monika1_] 0f60edd4d42a0b70d58a6a210fe17472
2/19/2018, 1:31:21.240 PM [Create Databases] Create database for each video
2/19/2018, 1:31:21.398 PM [createFaceDatabase 0b3b15d751f7d25ed63b4e6670d2c3a7] SUCCESS
2/19/2018, 1:31:21.410 PM [createFaceDatabase 420a6e1b708bf487023727b884e300c2] SUCCESS
2/19/2018, 1:31:21.419 PM [createFaceDatabase cd70d11fd12cd2671d05615ad2ca432b] SUCCESS
2/19/2018, 1:31:21.431 PM [createFaceDatabase 0f60edd4d42a0b70d58a6a210fe17472] SUCCESS
2/19/2018, 1:31:21.442 PM [createFaceDatabase 62e81f3bce5726f153c735c1f7356025] SUCCESS
2/19/2018, 1:31:21.450 PM [createFaceDatabase 39268126dc3459f39b0e0eef6a595131] SUCCESS
2/19/2018, 1:31:21.465 PM [createFaceDatabase a497f40dae18a2bb561a2eaa3a94d885] SUCCESS
2/19/2018, 1:31:21.600 PM [createFaceDatabase 6f21ae3264c54f1d7e2efa6c54bc3dff] SUCCESS
2/19/2018, 1:31:21.712 PM [createFaceDatabase e2256bb348f96b201c098db8b6c41018] SUCCESS
2/19/2018, 1:31:21.810 PM [createFaceDatabase 167f0dff796ca41508ab37bbbcefd846] SUCCESS
2/19/2018, 1:31:26.896 PM [startAnalysis] Processing Monika1!.avi
2/19/2018, 1:31:26.901 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = e2256bb348f96b201c098db8b6c41018
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1!/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:27.64 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:27.84 PM [process] SUCCESS
2/19/2018, 1:31:27.99 PM [startAnalysis] Processing Monika1$.avi
2/19/2018, 1:31:27.106 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 167f0dff796ca41508ab37bbbcefd846
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1$/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:27.255 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:27.276 PM [process] SUCCESS
2/19/2018, 1:31:27.289 PM [startAnalysis] Processing Monika1%.avi
2/19/2018, 1:31:27.292 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 0b3b15d751f7d25ed63b4e6670d2c3a7
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1%/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:27.445 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:27.465 PM [process] SUCCESS
2/19/2018, 1:31:27.478 PM [startAnalysis] Processing Monika1(.avi
2/19/2018, 1:31:27.483 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 6f21ae3264c54f1d7e2efa6c54bc3dff
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1(/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:27.633 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:27.654 PM [process] SUCCESS
2/19/2018, 1:31:27.667 PM [startAnalysis] Processing Monika1).avi
2/19/2018, 1:31:27.670 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = cd70d11fd12cd2671d05615ad2ca432b
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1)/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:27.824 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:27.845 PM [process] SUCCESS
2/19/2018, 1:31:27.861 PM [startAnalysis] Processing Monika1.avi
2/19/2018, 1:31:27.864 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 420a6e1b708bf487023727b884e300c2
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:28.32 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:28.52 PM [process] SUCCESS
2/19/2018, 1:31:28.65 PM [startAnalysis] Processing Monika1-.avi
2/19/2018, 1:31:28.69 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 62e81f3bce5726f153c735c1f7356025
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1-/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:28.248 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:28.270 PM [process] SUCCESS
2/19/2018, 1:31:28.284 PM [startAnalysis] Processing Monika1@.avi
2/19/2018, 1:31:28.288 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = a497f40dae18a2bb561a2eaa3a94d885
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1@/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:28.469 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:28.491 PM [process] SUCCESS
2/19/2018, 1:31:28.510 PM [startAnalysis] Processing Monika1^.avi
2/19/2018, 1:31:28.516 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 39268126dc3459f39b0e0eef6a595131
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1^/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:28.684 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:28.705 PM [process] SUCCESS
2/19/2018, 1:31:28.723 PM [startAnalysis] Processing Monika1_.avi
2/19/2018, 1:31:28.728 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 0f60edd4d42a0b70d58a6a210fe17472
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1_/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:31:28.883 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:31:28.904 PM [process] SUCCESS
2/19/2018, 1:31:32.107 PM [queueinfo] SUCCESS
2/19/2018, 1:31:32.130 PM [getstatus] SUCCESS
2/19/2018, 1:31:32.301 PM [queueinfo] SUCCESS
2/19/2018, 1:31:32.491 PM [queueinfo] SUCCESS
2/19/2018, 1:31:32.804 PM [queueinfo] SUCCESS
2/19/2018, 1:31:32.883 PM [queueinfo] SUCCESS
2/19/2018, 1:31:33.103 PM [queueinfo] SUCCESS
2/19/2018, 1:31:33.297 PM [queueinfo] SUCCESS
2/19/2018, 1:31:33.517 PM [queueinfo] SUCCESS
2/19/2018, 1:31:33.734 PM [queueinfo] SUCCESS
2/19/2018, 1:31:33.930 PM [queueinfo] SUCCESS
2/19/2018, 1:31:37.161 PM [queueinfo] SUCCESS
2/19/2018, 1:31:37.300 PM [queueinfo] SUCCESS
2/19/2018, 1:31:37.339 PM [getstatus] SUCCESS
2/19/2018, 1:31:37.488 PM [queueinfo] SUCCESS
2/19/2018, 1:31:37.679 PM [queueinfo] SUCCESS
2/19/2018, 1:31:37.873 PM [queueinfo] SUCCESS
2/19/2018, 1:31:38.79 PM [queueinfo] SUCCESS
2/19/2018, 1:31:38.301 PM [queueinfo] SUCCESS
2/19/2018, 1:31:38.521 PM [queueinfo] SUCCESS
2/19/2018, 1:31:38.725 PM [queueinfo] SUCCESS
2/19/2018, 1:31:38.935 PM [queueinfo] SUCCESS
2/19/2018, 1:31:42.300 PM [queueinfo] SUCCESS
2/19/2018, 1:31:42.324 PM [getstatus] SUCCESS
2/19/2018, 1:31:42.521 PM [queueinfo] SUCCESS
2/19/2018, 1:31:42.694 PM [queueinfo] SUCCESS
2/19/2018, 1:31:42.883 PM [queueinfo] SUCCESS
2/19/2018, 1:31:43.81 PM [queueinfo] SUCCESS
2/19/2018, 1:31:43.291 PM [queueinfo] SUCCESS
2/19/2018, 1:31:43.512 PM [queueinfo] SUCCESS
2/19/2018, 1:31:43.726 PM [queueinfo] SUCCESS
2/19/2018, 1:31:43.926 PM [queueinfo] SUCCESS
2/19/2018, 1:31:47.371 PM [queueinfo] SUCCESS
2/19/2018, 1:31:48.365 PM [queueinfo] SUCCESS
2/19/2018, 1:31:48.372 PM [queueinfo] SUCCESS
2/19/2018, 1:31:48.379 PM [queueinfo] SUCCESS
2/19/2018, 1:31:48.387 PM [queueinfo] SUCCESS
2/19/2018, 1:31:48.396 PM [queueinfo] SUCCESS
2/19/2018, 1:31:48.419 PM [getstatus] SUCCESS
2/19/2018, 1:31:49.353 PM [queueinfo] SUCCESS
2/19/2018, 1:31:49.374 PM [queueinfo] SUCCESS
2/19/2018, 1:31:49.393 PM [queueinfo] SUCCESS
2/19/2018, 1:31:53.798 PM [queueinfo] SUCCESS
2/19/2018, 1:31:53.809 PM [queueinfo] SUCCESS
2/19/2018, 1:31:53.841 PM [queueinfo] SUCCESS
2/19/2018, 1:31:53.849 PM [queueinfo] SUCCESS
2/19/2018, 1:31:53.858 PM [getstatus] SUCCESS
2/19/2018, 1:31:54.100 PM [queueinfo] SUCCESS
2/19/2018, 1:31:54.352 PM [queueinfo] SUCCESS
2/19/2018, 1:31:54.363 PM [queueinfo] SUCCESS
2/19/2018, 1:31:54.382 PM [queueinfo] SUCCESS
2/19/2018, 1:31:58.351 PM [queueinfo] SUCCESS
2/19/2018, 1:31:58.359 PM [queueinfo] SUCCESS
2/19/2018, 1:31:58.363 PM [queueinfo] SUCCESS
2/19/2018, 1:31:58.388 PM [getstatus] SUCCESS
2/19/2018, 1:31:58.427 PM [queueinfo] SUCCESS
2/19/2018, 1:31:59.361 PM [queueinfo] SUCCESS
2/19/2018, 1:31:59.370 PM [queueinfo] SUCCESS
2/19/2018, 1:31:59.382 PM [queueinfo] SUCCESS
2/19/2018, 1:32:03.360 PM [queueinfo] SUCCESS
2/19/2018, 1:32:03.371 PM [queueinfo] SUCCESS
2/19/2018, 1:32:03.387 PM [queueinfo] SUCCESS
2/19/2018, 1:32:03.424 PM [getstatus] SUCCESS
2/19/2018, 1:32:03.518 PM [queueinfo] SUCCESS
2/19/2018, 1:32:03.737 PM [queueinfo] SUCCESS
2/19/2018, 1:32:03.926 PM [queueinfo] SUCCESS
2/19/2018, 1:32:08.345 PM [queueinfo] SUCCESS
2/19/2018, 1:32:08.354 PM [queueinfo] SUCCESS
2/19/2018, 1:32:08.377 PM [getstatus] SUCCESS
2/19/2018, 1:32:08.417 PM [queueinfo] SUCCESS
2/19/2018, 1:32:09.346 PM [queueinfo] SUCCESS
2/19/2018, 1:32:09.360 PM [queueinfo] SUCCESS
2/19/2018, 1:32:09.367 PM [queueinfo] SUCCESS
2/19/2018, 1:32:13.443 PM [queueinfo] SUCCESS
2/19/2018, 1:32:13.477 PM [getstatus] SUCCESS
2/19/2018, 1:32:13.489 PM [queueinfo] SUCCESS
2/19/2018, 1:32:14.348 PM [queueinfo] SUCCESS
2/19/2018, 1:32:14.355 PM [queueinfo] SUCCESS
2/19/2018, 1:32:14.364 PM [queueinfo] SUCCESS
2/19/2018, 1:32:18.356 PM [queueinfo] SUCCESS
2/19/2018, 1:32:18.393 PM [getstatus] SUCCESS
2/19/2018, 1:32:19.517 PM [queueinfo] SUCCESS
2/19/2018, 1:32:19.565 PM [queueinfo] SUCCESS
2/19/2018, 1:32:19.596 PM [queueinfo] SUCCESS
2/19/2018, 1:32:19.626 PM [getstatus] SUCCESS
2/19/2018, 1:32:23.368 PM [queueinfo] SUCCESS
2/19/2018, 1:32:24.352 PM [queueinfo] SUCCESS
2/19/2018, 1:32:24.361 PM [queueinfo] SUCCESS
2/19/2018, 1:32:24.367 PM [queueinfo] SUCCESS
2/19/2018, 1:32:24.392 PM [getstatus] SUCCESS
2/19/2018, 1:32:29.384 PM [queueinfo] SUCCESS
2/19/2018, 1:32:29.392 PM [queueinfo] SUCCESS
2/19/2018, 1:32:29.420 PM [getstatus] SUCCESS
2/19/2018, 1:32:29.484 PM [queueinfo] SUCCESS
2/19/2018, 1:32:34.386 PM [queueinfo] SUCCESS
2/19/2018, 1:32:34.418 PM [getstatus] SUCCESS
2/19/2018, 1:32:34.475 PM [queueinfo] SUCCESS
2/19/2018, 1:32:39.337 PM [queueinfo] SUCCESS
2/19/2018, 1:32:39.360 PM [getstatus] SUCCESS
2/19/2018, 1:32:44.384 PM [queueinfo] SUCCESS
2/19/2018, 1:35:01.981 PM [queueinfo] SUCCESS
2/19/2018, 1:35:01.984 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1!\3da3052f-a67a-42a3-a956-3be1b4733da9\3da3052f-a67a-42a3-a956-3be1b4733da9_00-00-04_crop.jpg
2/19/2018, 1:35:03.668 PM [queueinfo] SUCCESS
2/19/2018, 1:35:03.670 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1$\0c5bdbfc-d3dd-4f68-923c-91e15cac46f0\0c5bdbfc-d3dd-4f68-923c-91e15cac46f0_00-00-04_crop.jpg
2/19/2018, 1:35:05.356 PM [queueinfo] SUCCESS
2/19/2018, 1:35:05.358 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1%\%record.id.uuid%\%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg
2/19/2018, 1:35:06.564 PM [queueinfo] SUCCESS
2/19/2018, 1:35:06.566 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1(\f418fc5a-3a18-4884-90e5-dbd29377f4ae\f418fc5a-3a18-4884-90e5-dbd29377f4ae_00-00-04_crop.jpg
2/19/2018, 1:35:13.450 PM [queueinfo] SUCCESS
2/19/2018, 1:35:13.452 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1)\a32d6dd3-930c-43ff-8cc1-6d27b36cc9de\a32d6dd3-930c-43ff-8cc1-6d27b36cc9de_00-00-04_crop.jpg
2/19/2018, 1:35:14.918 PM [queueinfo] SUCCESS
2/19/2018, 1:35:14.921 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1\dc35b036-5c18-4e69-92ea-ba8b22108200\dc35b036-5c18-4e69-92ea-ba8b22108200_00-00-04_crop.jpg
2/19/2018, 1:35:16.111 PM [queueinfo] SUCCESS
2/19/2018, 1:35:16.114 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1-\f033de73-f567-4e8a-bbca-03aeddbf2972\f033de73-f567-4e8a-bbca-03aeddbf2972_00-00-04_crop.jpg
2/19/2018, 1:35:17.406 PM [queueinfo] SUCCESS
2/19/2018, 1:35:17.408 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1@\385091f4-7e20-4781-a229-b8327cea81b2\385091f4-7e20-4781-a229-b8327cea81b2_00-00-04_crop.jpg
2/19/2018, 1:35:18.749 PM [queueinfo] SUCCESS
2/19/2018, 1:35:18.752 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1^\b2eac65a-f628-4425-a894-9480dd21b476\b2eac65a-f628-4425-a894-9480dd21b476_00-00-04_crop.jpg
2/19/2018, 1:35:20.258 PM [queueinfo] SUCCESS
2/19/2018, 1:35:20.261 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1_\250396f1-2c09-400f-b59f-1011f9732441\250396f1-2c09-400f-b59f-1011f9732441_00-00-04_crop.jpg
2/19/2018, 1:35:22.870 PM [queueinfo] SUCCESS
2/19/2018, 1:35:22.872 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1(\f418fc5a-3a18-4884-90e5-dbd29377f4ae\f418fc5a-3a18-4884-90e5-dbd29377f4ae_00-00-04_crop.jpg
2/19/2018, 1:37:46.779 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:37:46.785 PM [Remove Databases] Remove all databases
2/19/2018, 1:37:46.828 PM [removeFaceDatabase 420a6e1b708bf487023727b884e300c2] SUCCESS
2/19/2018, 1:37:46.840 PM [removeFaceDatabase 62e81f3bce5726f153c735c1f7356025] SUCCESS
2/19/2018, 1:37:46.854 PM [removeFaceDatabase 39268126dc3459f39b0e0eef6a595131] SUCCESS
2/19/2018, 1:37:46.874 PM [removeFaceDatabase 6f21ae3264c54f1d7e2efa6c54bc3dff] SUCCESS
2/19/2018, 1:37:46.894 PM [removeFaceDatabase a497f40dae18a2bb561a2eaa3a94d885] SUCCESS
2/19/2018, 1:37:46.918 PM [removeFaceDatabase e2256bb348f96b201c098db8b6c41018] SUCCESS
2/19/2018, 1:37:46.936 PM [removeFaceDatabase 167f0dff796ca41508ab37bbbcefd846] SUCCESS
2/19/2018, 1:37:47.22 PM [removeFaceDatabase cd70d11fd12cd2671d05615ad2ca432b] SUCCESS
2/19/2018, 1:37:47.123 PM [removeFaceDatabase 0f60edd4d42a0b70d58a6a210fe17472] SUCCESS
2/19/2018, 1:37:47.221 PM [removeFaceDatabase 0b3b15d751f7d25ed63b4e6670d2c3a7] SUCCESS
2/19/2018, 1:37:53.394 PM [Monika1,] 6c193cd3d4e72ffe896022e118c0505c
2/19/2018, 1:37:53.397 PM [Monika1] 420a6e1b708bf487023727b884e300c2
2/19/2018, 1:37:53.399 PM [Monika1'] 45aef41a8cb3a6b844204685a4191f67
2/19/2018, 1:37:53.401 PM [Monika1;] 66ec4da435876415305273efc053c409
2/19/2018, 1:37:53.404 PM [Monika1[] b05c5a67a5450d96f8ad4660ef5e6b2e
2/19/2018, 1:37:53.406 PM [Monika1]] 0d23bb9362a7cf1c5a7896f4f1170f5b
2/19/2018, 1:37:53.409 PM [Monika1{] 3afbf5cf2b7acd777c1549fd510db9bd
2/19/2018, 1:37:53.413 PM [Monika1}] 37c20ff4f4e32e1961c285b5c60968fc
2/19/2018, 1:37:53.416 PM [Monika1£] a25c056183db41f6e9af303e19d7c5de
2/19/2018, 1:37:53.418 PM [Create Databases] Create database for each video
2/19/2018, 1:37:53.453 PM [createFaceDatabase b05c5a67a5450d96f8ad4660ef5e6b2e] SUCCESS
2/19/2018, 1:37:53.464 PM [createFaceDatabase 0d23bb9362a7cf1c5a7896f4f1170f5b] SUCCESS
2/19/2018, 1:37:53.479 PM [createFaceDatabase 45aef41a8cb3a6b844204685a4191f67] SUCCESS
2/19/2018, 1:37:53.496 PM [createFaceDatabase 37c20ff4f4e32e1961c285b5c60968fc] SUCCESS
2/19/2018, 1:37:53.508 PM [createFaceDatabase a25c056183db41f6e9af303e19d7c5de] SUCCESS
2/19/2018, 1:37:53.520 PM [createFaceDatabase 3afbf5cf2b7acd777c1549fd510db9bd] SUCCESS
2/19/2018, 1:37:53.672 PM [createFaceDatabase 420a6e1b708bf487023727b884e300c2] SUCCESS
2/19/2018, 1:37:53.763 PM [createFaceDatabase 6c193cd3d4e72ffe896022e118c0505c] SUCCESS
2/19/2018, 1:37:53.866 PM [createFaceDatabase 66ec4da435876415305273efc053c409] SUCCESS
2/19/2018, 1:37:57.969 PM [startAnalysis] Processing Monika1,.avi
2/19/2018, 1:37:57.972 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 6c193cd3d4e72ffe896022e118c0505c
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1,/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:58.124 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:58.143 PM [process] SUCCESS
2/19/2018, 1:37:58.158 PM [startAnalysis] Processing Monika1.avi
2/19/2018, 1:37:58.161 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 420a6e1b708bf487023727b884e300c2
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:58.318 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:58.337 PM [process] SUCCESS
2/19/2018, 1:37:58.351 PM [startAnalysis] Processing Monika1'.avi
2/19/2018, 1:37:58.354 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 45aef41a8cb3a6b844204685a4191f67
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1'/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:58.512 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:58.534 PM [process] SUCCESS
2/19/2018, 1:37:58.548 PM [startAnalysis] Processing Monika1;.avi
2/19/2018, 1:37:58.551 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 66ec4da435876415305273efc053c409
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1;/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:58.704 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:58.727 PM [process] SUCCESS
2/19/2018, 1:37:58.743 PM [startAnalysis] Processing Monika1[.avi
2/19/2018, 1:37:58.746 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = b05c5a67a5450d96f8ad4660ef5e6b2e
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1[/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:58.907 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:58.925 PM [process] SUCCESS
2/19/2018, 1:37:58.939 PM [startAnalysis] Processing Monika1].avi
2/19/2018, 1:37:58.942 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 0d23bb9362a7cf1c5a7896f4f1170f5b
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1]/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:59.116 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:59.148 PM [process] SUCCESS
2/19/2018, 1:37:59.164 PM [startAnalysis] Processing Monika1{.avi
2/19/2018, 1:37:59.168 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 3afbf5cf2b7acd777c1549fd510db9bd
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1{/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:59.355 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:59.376 PM [process] SUCCESS
2/19/2018, 1:37:59.397 PM [startAnalysis] Processing Monika1}.avi
2/19/2018, 1:37:59.402 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = 37c20ff4f4e32e1961c285b5c60968fc
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1}/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:59.576 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:59.596 PM [process] SUCCESS
2/19/2018, 1:37:59.614 PM [startAnalysis] Processing Monika1£.avi
2/19/2018, 1:37:59.618 PM [startAnalysis] //
// HPE Face Extractor templated Media Server configuration.
//


// ======================= Ingest =======================
[Ingest]
IngestEngine = LibAV
//IngestRate = 0

[LibAV]
Type = libav
IngestTime = 0
EnabledStreamTypes = video


// ======================= Analysis =======================
[Analysis]
AnalysisEngine0 = FaceDetect
AnalysisEngine1 = FaceRecognize

[FaceDetect]
Type = facedetect
SampleInterval = 1000
NumParallel = 1
MinSize = 40
SizeUnit = pixel
DetectEyes = true
ColorAnalysis = false
DetectTilted = true
FaceDirection = any
Orientation = any

[FaceRecognize]
Type = facerecognize
Input = FaceDetect.ResultWithSource
Database = a25c056183db41f6e9af303e19d7c5de
MaxRecognitionResults = 1
RecognitionThreshold = 75


// ======================= EventProcessing =======================
[EventProcessing]
EventProcessingEngine0 = RecognisedFace
EventProcessingEngine1 = RecognisedFaceNoSource
EventProcessingEngine2 = UnRecognisedFace
EventProcessingEngine3 = DeduplicateDataTrack

[RecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResultWithSource.lua

[RecognisedFaceNoSource]
Type = Filter
Input = FaceRecognize.Result
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/recognisedFaceResult.lua

[UnRecognisedFace]
Type = Filter
Input = FaceRecognize.ResultWithSource
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/unRecognisedFaceResultWithSource.lua

[DeduplicateDataTrack]
Type = Deduplicate
Input = FaceDetect.DataWithSource
MinTimeInterval = 10
PredicateType = lua
LuaScript = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/deduplicateFaceData.lua


// ======================= Transform =======================
[Transform]
TransformEngine0 = CropUnRecognisedFace
TransformEngine1 = CropRecognisedFace
TransformEngine2 = CropAnyFace

[CropRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = RecognisedFace.Output

[CropUnRecognisedFace]
Type = crop
Border = 3
BorderUnit = percent
Input = UnRecognisedFace.Output

[CropAnyFace]
Type = crop
Border = 3
BorderUnit = percent
Input = DeduplicateDataTrack.Output


// ======================= Encoding =======================
[Encoding]
EncodingEngine0 = StoreUnRecognisedCroppedFace
EncodingEngine1 = StoreUnRecognisedFullFrame
EncodingEngine2 = StoreRecognisedCroppedFace
EncodingEngine3 = StoreRecognisedFullFrame
EncodingEngine4 = StoreAllTrackFaces

[StoreUnRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropUnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreUnRecognisedFullFrame]
Type = imageencoder
ImageInput = UnRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreRecognisedCroppedFace]
Type = imageencoder
ImageInput = CropRecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_crop.jpg

[StoreRecognisedFullFrame]
Type = imageencoder
ImageInput = RecognisedFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_full.jpg

[StoreAllTrackFaces]
Type = imageencoder
ImageInput = CropAnyFace.Output
OutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.id.uuid%/allFaces/%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%_%uuid%.jpg


// ======================= Output =======================
[Output]
OutputEngine0 = WriteRecognisedFaceMetadata
OutputEngine1 = WriteUnrecognisedFaceMetadata
OutputEngine2 = TrainNewFace
OutputEngine3 = AddExtraFace
OutputEngine6 = ResponseEngine
OutputEngine4 = CreateClip
OutputEngine5 = MoveDataCrops
//OutputEngine4 = CreateClip
//OutputEngine4 = MoveDataCrops

[WriteRecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = RecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.identity.identifier%/matched_%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[WriteUnrecognisedFaceMetadata]
Type = xml
Mode = SingleRecord
Input = UnRecognisedFace.Output
XMLOutputPath = C:\HewlettPackardEnterprise\dropbox\faces/Monika1£/%record.id.uuid%/%record.id.uuid%_%record.peaktime.hour%-%record.peaktime.minute%-%record.peaktime.second%.txt
XSLTemplate = C:/HewlettPackardEnterprise//face-extraction-app/mediaserver/toFaceMetadata.xsl

[TrainNewFace]
Type = httppost
Mode = SingleRecord
Input = StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/trainNewFace

[AddExtraFace]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/addExtraFace

[CreateClip]
Type = httppost
Mode = SingleRecord
Input = StoreRecognisedCroppedFace.Proxy,StoreUnRecognisedCroppedFace.Proxy
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
DestinationURL = http://localhost:14010/createClip

[MoveDataCrops]
Type = httppost
Mode = Bounded
Input = RecognisedFaceNoSource.Output,StoreAllTrackFaces.Proxy
EventTrack = RecognisedFaceNoSource.OutputCropAnyFace.Output
XMLOutputPath = C:/HewlettPackardEnterprise//IDOLServer-11.1.0/mediaserver/outputdata/failed
SavePreXML = true
DestinationURL = http://localhost:14010/moveDataCrops

[ResponseEngine]
Type=Response
Input=StoreAllTrackFaces.Proxy,StoreUnRecognisedCroppedFace.Proxy,StoreUnRecognisedFullFrame.Proxy,StoreRecognisedCroppedFace.Proxy,StoreRecognisedFullFrame.Proxy

2/19/2018, 1:37:59.774 PM [startAnalysis] Video frames to process: 351
2/19/2018, 1:37:59.794 PM [process] SUCCESS
2/19/2018, 1:38:03.589 PM [queueinfo] SUCCESS
2/19/2018, 1:38:03.628 PM [getstatus] SUCCESS
2/19/2018, 1:38:03.637 PM [queueinfo] SUCCESS
2/19/2018, 1:38:03.653 PM [queueinfo] SUCCESS
2/19/2018, 1:38:03.768 PM [queueinfo] SUCCESS
2/19/2018, 1:38:03.960 PM [queueinfo] SUCCESS
2/19/2018, 1:38:04.181 PM [queueinfo] SUCCESS
2/19/2018, 1:38:04.414 PM [queueinfo] SUCCESS
2/19/2018, 1:38:05.342 PM [queueinfo] SUCCESS
2/19/2018, 1:38:05.352 PM [queueinfo] SUCCESS
2/19/2018, 1:38:08.226 PM [queueinfo] SUCCESS
2/19/2018, 1:38:08.364 PM [queueinfo] SUCCESS
2/19/2018, 1:38:08.392 PM [getstatus] SUCCESS
2/19/2018, 1:38:08.566 PM [queueinfo] SUCCESS
2/19/2018, 1:38:08.762 PM [queueinfo] SUCCESS
2/19/2018, 1:38:08.953 PM [queueinfo] SUCCESS
2/19/2018, 1:38:09.171 PM [queueinfo] SUCCESS
2/19/2018, 1:38:09.496 PM [queueinfo] SUCCESS
2/19/2018, 1:38:09.623 PM [queueinfo] SUCCESS
2/19/2018, 1:38:09.893 PM [queueinfo] SUCCESS
2/19/2018, 1:38:13.371 PM [queueinfo] SUCCESS
2/19/2018, 1:38:13.394 PM [getstatus] SUCCESS
2/19/2018, 1:38:13.558 PM [queueinfo] SUCCESS
2/19/2018, 1:38:13.759 PM [queueinfo] SUCCESS
2/19/2018, 1:38:13.953 PM [queueinfo] SUCCESS
2/19/2018, 1:38:14.184 PM [queueinfo] SUCCESS
2/19/2018, 1:38:14.454 PM [queueinfo] SUCCESS
2/19/2018, 1:38:14.650 PM [queueinfo] SUCCESS
2/19/2018, 1:38:14.826 PM [queueinfo] SUCCESS
2/19/2018, 1:38:18.442 PM [queueinfo] SUCCESS
2/19/2018, 1:38:18.565 PM [queueinfo] SUCCESS
2/19/2018, 1:38:18.597 PM [getstatus] SUCCESS
2/19/2018, 1:38:18.771 PM [queueinfo] SUCCESS
2/19/2018, 1:38:18.958 PM [queueinfo] SUCCESS
2/19/2018, 1:38:19.199 PM [queueinfo] SUCCESS
2/19/2018, 1:38:19.406 PM [queueinfo] SUCCESS
2/19/2018, 1:38:19.624 PM [queueinfo] SUCCESS
2/19/2018, 1:38:19.819 PM [queueinfo] SUCCESS
2/19/2018, 1:38:23.596 PM [queueinfo] SUCCESS
2/19/2018, 1:38:23.754 PM [queueinfo] SUCCESS
2/19/2018, 1:38:23.786 PM [getstatus] SUCCESS
2/19/2018, 1:38:23.952 PM [queueinfo] SUCCESS
2/19/2018, 1:38:24.172 PM [queueinfo] SUCCESS
2/19/2018, 1:38:24.417 PM [queueinfo] SUCCESS
2/19/2018, 1:38:24.624 PM [queueinfo] SUCCESS
2/19/2018, 1:38:24.818 PM [queueinfo] SUCCESS
2/19/2018, 1:38:28.827 PM [queueinfo] SUCCESS
2/19/2018, 1:38:28.954 PM [queueinfo] SUCCESS
2/19/2018, 1:38:28.989 PM [getstatus] SUCCESS
2/19/2018, 1:38:28.994 PM [checkProgress] TypeError: Cannot read property 'forEach' of undefined
2/19/2018, 1:38:29.231 PM [queueinfo] SUCCESS
2/19/2018, 1:38:29.420 PM [queueinfo] SUCCESS
2/19/2018, 1:38:29.620 PM [queueinfo] SUCCESS
2/19/2018, 1:38:29.825 PM [queueinfo] SUCCESS
2/19/2018, 1:38:33.948 PM [queueinfo] SUCCESS
2/19/2018, 1:38:33.974 PM [getstatus] SUCCESS
2/19/2018, 1:38:34.174 PM [queueinfo] SUCCESS
2/19/2018, 1:38:34.409 PM [queueinfo] SUCCESS
2/19/2018, 1:38:34.623 PM [queueinfo] SUCCESS
2/19/2018, 1:38:34.833 PM [queueinfo] SUCCESS
2/19/2018, 1:38:39.35 PM [queueinfo] SUCCESS
2/19/2018, 1:38:39.186 PM [queueinfo] SUCCESS
2/19/2018, 1:38:39.222 PM [getstatus] SUCCESS
2/19/2018, 1:38:39.423 PM [queueinfo] SUCCESS
2/19/2018, 1:38:39.658 PM [queueinfo] SUCCESS
2/19/2018, 1:38:39.819 PM [queueinfo] SUCCESS
2/19/2018, 1:38:44.218 PM [queueinfo] SUCCESS
2/19/2018, 1:38:44.408 PM [queueinfo] SUCCESS
2/19/2018, 1:38:44.444 PM [getstatus] SUCCESS
2/19/2018, 1:38:44.633 PM [queueinfo] SUCCESS
2/19/2018, 1:38:44.823 PM [queueinfo] SUCCESS
2/19/2018, 1:38:49.420 PM [queueinfo] SUCCESS
2/19/2018, 1:38:49.447 PM [getstatus] SUCCESS
2/19/2018, 1:38:49.624 PM [queueinfo] SUCCESS
2/19/2018, 1:38:49.822 PM [queueinfo] SUCCESS
2/19/2018, 1:38:54.446 PM [queueinfo] SUCCESS
2/19/2018, 1:38:54.634 PM [queueinfo] SUCCESS
2/19/2018, 1:38:54.660 PM [getstatus] SUCCESS
2/19/2018, 1:38:54.822 PM [queueinfo] SUCCESS
2/19/2018, 1:38:59.715 PM [queueinfo] SUCCESS
2/19/2018, 1:38:59.825 PM [queueinfo] SUCCESS
2/19/2018, 1:38:59.860 PM [getstatus] SUCCESS
2/19/2018, 1:39:04.856 PM [queueinfo] SUCCESS
2/19/2018, 1:39:38.326 PM [queueinfo] SUCCESS
2/19/2018, 1:39:38.327 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1,\b859996d-3dae-4530-b4d9-27b2e2d9274c\b859996d-3dae-4530-b4d9-27b2e2d9274c_00-00-04_crop.jpg
2/19/2018, 1:39:39.756 PM [queueinfo] SUCCESS
2/19/2018, 1:39:39.759 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1\2fd996e3-3b1e-4e19-b194-da810c507e48\2fd996e3-3b1e-4e19-b194-da810c507e48_00-00-04_crop.jpg
2/19/2018, 1:39:40.962 PM [queueinfo] SUCCESS
2/19/2018, 1:39:40.964 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1'\a54c8b42-866a-4630-9e70-cf2a0d42225f\a54c8b42-866a-4630-9e70-cf2a0d42225f_00-00-04_crop.jpg
2/19/2018, 1:39:42.115 PM [queueinfo] SUCCESS
2/19/2018, 1:39:42.117 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1;\50eb6c8a-7bbd-4679-9978-ca87ad8d3335\50eb6c8a-7bbd-4679-9978-ca87ad8d3335_00-00-04_crop.jpg
2/19/2018, 1:39:43.309 PM [queueinfo] SUCCESS
2/19/2018, 1:39:43.311 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1[\35b930b6-d2d3-42b0-ad71-a63cfb90da9a\35b930b6-d2d3-42b0-ad71-a63cfb90da9a_00-00-04_crop.jpg
2/19/2018, 1:39:45.259 PM [queueinfo] SUCCESS
2/19/2018, 1:39:45.261 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1]\11d90589-8fea-4fe1-a4b3-c4f5ed8508b0\11d90589-8fea-4fe1-a4b3-c4f5ed8508b0_00-00-04_crop.jpg
2/19/2018, 1:39:46.721 PM [queueinfo] SUCCESS
2/19/2018, 1:39:46.724 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1{\6010d07d-1baa-41a4-ba53-1df439d1cef1\6010d07d-1baa-41a4-ba53-1df439d1cef1_00-00-04_crop.jpg
2/19/2018, 1:39:47.855 PM [queueinfo] SUCCESS
2/19/2018, 1:39:47.857 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1}\6c8dbcb6-f5d6-4285-9928-38ac05777fad\6c8dbcb6-f5d6-4285-9928-38ac05777fad_00-00-04_crop.jpg
2/19/2018, 1:39:49.121 PM [queueinfo] SUCCESS
2/19/2018, 1:39:49.123 PM [Display Faces] Face Path: C:\HewlettPackardEnterprise\dropbox\faces\Monika1£\0a229d0c-2789-454c-b374-176f5a628d28\0a229d0c-2789-454c-b374-176f5a628d28_00-00-04_crop.jpg
2/19/2018, 1:41:56.670 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:41:56.675 PM [Remove Databases] Remove all databases
2/19/2018, 1:41:56.808 PM [removeFaceDatabase a25c056183db41f6e9af303e19d7c5de] SUCCESS
2/19/2018, 1:41:56.824 PM [removeFaceDatabase b05c5a67a5450d96f8ad4660ef5e6b2e] SUCCESS
2/19/2018, 1:41:56.840 PM [removeFaceDatabase 3afbf5cf2b7acd777c1549fd510db9bd] SUCCESS
2/19/2018, 1:41:56.856 PM [removeFaceDatabase 420a6e1b708bf487023727b884e300c2] SUCCESS
2/19/2018, 1:41:56.866 PM [removeFaceDatabase 6c193cd3d4e72ffe896022e118c0505c] SUCCESS
2/19/2018, 1:41:56.881 PM [removeFaceDatabase 66ec4da435876415305273efc053c409] SUCCESS
2/19/2018, 1:41:56.919 PM [removeFaceDatabase 0d23bb9362a7cf1c5a7896f4f1170f5b] SUCCESS
2/19/2018, 1:41:57.16 PM [removeFaceDatabase 45aef41a8cb3a6b844204685a4191f67] SUCCESS
2/19/2018, 1:41:57.121 PM [removeFaceDatabase 37c20ff4f4e32e1961c285b5c60968fc] SUCCESS
2/19/2018, 1:42:24.535 PM [ListFaceDatabases] SUCCESS
2/19/2018, 1:42:24.537 PM [Remove database] No database to remove
